<ion-header translucent>
  <ion-toolbar color="light" class="header-completo">
    <ion-title>Imágenes</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="cancelar()">
        <ion-icon name="close-outline" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen class="ion-padding">

  <!-- Imagen principal -->
 <div class="campo">
  <label class="etiqueta">Imagen principal *</label>
  
  <!-- Botón original para elegir archivo -->
  <label class="file-input-label">
    <input type="file" id="fileInputPrincipal" accept="image/*" (change)="seleccionarImagenPrincipal($event)" />
    <ion-icon name="cloud-upload-outline"></ion-icon> Elegir archivo
  </label>
  
  <!-- Vista previa cuando hay una imagen -->
  <div class="preview-container" *ngIf="imagenPrincipalMostrada">
    <img [src]="imagenPrincipalMostrada" class="preview-img" />
    <ion-icon name="close-circle" class="icono-borrar-principal" (click)="eliminarImagenPrincipal()"></ion-icon>
  </div>
  
  <!-- Área de placeholder cuando no hay imagen - CORREGIDO para activar el mismo input -->
  <label class="preview-placeholder" *ngIf="!imagenPrincipalMostrada" for="fileInputPrincipal">
    <ion-icon name="image-outline"></ion-icon>
  </label>
</div>

<br>

<div class="campo">
  <label class="etiqueta">Imágenes secundarias (máx. 10)</label>
  
  <!-- Botón original para elegir archivos -->
    <label class="file-input-label">
    <input type="file" id="fileInputSecundario" accept="image/*" multiple (change)="seleccionarImagenesSecundarias($event)" />
    <ion-icon name="images-outline"></ion-icon> Elegir archivos
  </label>  
  
  <div class="imagenes-secundarias">
    <!-- Imágenes existentes -->
    <div class="preview-wrapper" *ngFor="let img of imagenesSecundariasMostradas; let i = index">
      <img [src]="img" class="preview-img-mini" />
      <ion-icon name="close-circle" class="icono-borrar" (click)="eliminarImagenSecundaria(i)"></ion-icon>
    </div>
    
    <!-- Botón para agregar más imágenes - CORREGIDO para activar el mismo input -->
    <label class="add-more-placeholder" *ngIf="imagenesSecundariasMostradas.length < 10" for="fileInputSecundario">
      <ion-icon name="add-outline"></ion-icon>
    </label>
  </div>
</div>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <div class="botones-footer">
      <ion-button color="dark" expand="block" (click)="cancelar()">
        <ion-icon name="close-outline" slot="start"></ion-icon>
        Cancelar
      </ion-button>

      <ion-button color="danger" expand="block" (click)="confirmar()">
        <ion-icon name="save-outline" slot="start"></ion-icon>
        Guardar imágenes
      </ion-button>
    </div>
  </ion-toolbar>
</ion-footer>
